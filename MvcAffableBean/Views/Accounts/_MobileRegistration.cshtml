@model MvcAffableBean.Models.CustomerOrder
@{
    ViewBag.Title = "Mobile Registration";
}
<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <title>Mobile Number</title>    
    <script src="~/Scripts/jquery-1.10.2.js"></script>    
    <script src="~/Scripts/bootstrap.js"></script>    
    <link href="~/Content/bootstrap.css" rel="stylesheet" />
</head>
<body>
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-12 col-lg-6">
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        Enter Mobile Number
                    </div>
                    <div class="panel-body">
                        <form name="myform">
                            <div class="form-group">
                                <label f --or="phone">Mobile/Phone Number *</label>
                                <input type="text" id="phone" name="phone" maxlength="10" class="form-control">
                                <span id="error_phone" class="text-danger"></span>
                            </div>
                            <div class="btn-group">
                                <button id="submit" type="button" value="submit" class="btn btn-success">Next</button>
                                <button id="cancel" value="Review Order" class="btn btn-primary center">Close</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        </div>

        <script type="text/javascript">
            $(document).ready(function () {
            });
            $flag = 1;
            $("#phone").focusout(function () {
                $pho = $("#phone").val();
                if ($(this).val() == '') {
                    $(this).css("border-color", "#FF0000");
                    $('#submit').attr('disabled', true);
                    $("#error_phone").text("Please enter your Phone Number *");
                }
                else if ($pho.length != 10) {
                    $(this).css("border-color", "#FF0000");
                    $('#submit').attr('disabled', true);
                    $("#error_phone").text("Lenght of Phone Number Should Be Ten *");
                }
                else if (!$.isNumeric($pho)) {
                    $(this).css("border-color", "#FF0000");
                    $('#submit').attr('disabled', true);
                    $("#error_phone").text("Phone Number Should Be Numeric *");
                }
                else {
                    $(this).css({ "border-color": "#2eb82e" });
                    $('#submit').attr('disabled', false);
                    $("#error_phone").text("");
                }

            });

            $("#submit").click(function () {
                if ($("#phone").val() == '') {
                    $("#phone").css("border-color", "#FF0000");
                    $('#submit').attr('disabled', true);
                    $("#error_phone").text("Please enter your Mobile Number Number *");
                }
                else {

                    $("#exampleModalLong").hide();
                    var mobileNumber = $("#phone").val();
                    //console.log(mobileNumber);
                    $.ajax({
                        url: '@Url.Action("Register","Accounts")?mobile=' + mobileNumber,
                        type: 'GET',
                        cache: false,
                        //data: { meter_id: meterId }
                    }).done(function (result) {
                        // console.log("Ajax Success");
                        // console.log(result + "123");
                        $('#partial').html(result);
                        $("#exampleModalLong").show();
                    }).fail(function (result) {
                        console.log("Ajax Fail");
                    }).error(function (result) {
                        console.log("Ajax Error");
                    });
                }
            });
        </script>
</body>
</html>
